<app-body>
  <div class="row text-center">
    <div class="col-md-12 py-3">
      <app-card>
        <ng-container *ngIf="ready; else loading">
          <h1>Game Setup</h1>
          <hr>
          <section id="deck-select">
            <h4>
              1. Select a deck.
            </h4>
            <div class="row justify-content-center">
              <div class="col-md-4 my-3">
                <ng-container *ngFor="let deck of blockDecks">
                  <app-card>
                    <h4>{{deck.title}}</h4>
                    <p>{{deck.description}}</p>
                    <i class="fa fa-check" *ngIf="selectedDeck && selectedDeck._id === deck._id"></i>
                    <button class="btn btn-outline-primary" (click)="selectDeck(deck)"
                            *ngIf="!selectedDeck || selectedDeck._id !== deck._id">
                      Select
                    </button>
                  </app-card>
                </ng-container>
              </div>
            </div>
          </section>
          <hr>
          <section id="mode-select">
            <h4>
              2. Select a mode.
            </h4>
            <div class="row justify-content-center">
              <div class="col-md-4 my-3">
                <ng-container *ngFor="let mode of modes">
                  <app-card>
                    <h4>{{mode.title}}</h4>
                    <p>{{mode.description}}</p>
                    <i class="fa fa-check" *ngIf="selectedMode && selectedMode._id === mode._id"></i>
                    <button class="btn btn-outline-primary" (click)="selectMode(mode)"
                            *ngIf="!selectedMode || selectedMode._id !== mode._id">
                      Select
                    </button>
                  </app-card>
                </ng-container>
              </div>
            </div>
          </section>
          <hr>
          <section id="start">
            <div class="row justify-content-center">
              <div class="col-md-6">
                <div class="alert alert-info" *ngIf="!canStartGame">
                  You must select a DECK and MODE to start.
                </div>
                <p>
                  Selected Deck:
                  <strong>
                    <span *ngIf="selectedDeck">{{selectedDeck.title}}</span>
                    <span *ngIf="!selectedDeck">---</span>
                  </strong>
                </p>
                <p>
                  Selected Mode:
                  <strong>
                    <span *ngIf="selectedMode">{{selectedMode.title}}</span>
                    <span *ngIf="!selectedMode">---</span>
                  </strong>
                </p>
                <p>
                  <button class="btn btn-primary btn-block btn-large" (click)="startGame()" [disabled]="!canStartGame">
                    Start Game
                  </button>
                </p>
              </div>
            </div>
          </section>
        </ng-container>
      </app-card>
    </div>
  </div>
</app-body>

<ng-template #loading>
  <app-loading></app-loading>
</ng-template>
